name: Smoke Test - App Mento
run-name: "App Mento Smoke Test #${{ github.run_number }} - ${{ github.event.deployment.environment || 'deploy' }}"
on:
  deployment_status:

permissions:
  contents: read
  deployments: read
  id-token: write

jobs:
  test:
    if: github.event_name == 'deployment_status' && github.event.deployment_status.state == 'success' && contains(github.event.deployment_status.target_url, 'appmento')
    uses: mento-protocol/mento-automation-tests/.github/workflows/app-mento-smoke-test.yml@main
    with:
      CUSTOM_URL: ${{ github.event.deployment_status.environment_url }}
      IS_MAINNET: "false"
    secrets: inherit
